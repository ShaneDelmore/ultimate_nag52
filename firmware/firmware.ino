#include <esp32_can.h>
#include "A0.h"
#include <can_common.h>

CAN_FRAME f;
// Engine

//uint8_t ms_210[8] = {0x00, 0x00, 0x48, 0x40, 0x00, 0x00, 0x80, 0x00};
//uint8_t ms_212[8] = {0x03, 0x0C, 0x28, 0xB9, 0x28, 0xB9, 0xA8, 0xB9};
//uint8_t ms_2f3[8] = {0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00};
//uint8_t ms_308[8] = {0x00, 0x04, 0x73, 0x00, 0x00, 0x68, 0xC3, 0x3A};
//uint8_t ms_312[8] = {0x07, 0x68, 0x07, 0x7C, 0x0A, 0x45, 0x07, 0x4A};
//uint8_t ms_608[8] = {0x6F, 0x43, 0x06, 0x2D, 0xFA, 0x00, 0x8C, 0x00};
//uint8_t ezs_240[8]= {0x00, 0x22, 0x00, 0x00, 0x00, 0x02, 0xFF, 0x00};

// ABS/ESP
//uint8_t bs_200[8] = {0x10, 0x44, 0x01, 0xAD, 0x01, 0xAD, 0x01, 0xA7};
//uint8_t bs_208[8] = {0x00, 0x20, 0x00, 0x00, 0x01, 0xA9, 0x01, 0xAE};
//uint8_t bs_270[8] = {0x6F, 0x96, 0x06, 0xFF, 0xFF, 0x00, 0x00, 0xFF};
//uint8_t bs_300[8] = {0x08, 0x08, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xFF};
//uint8_t bs_328[8] = {0xFF, 0xFF, 0x85, 0x00, 0x00, 0x03, 0x95, 0x0B};

// EZS
//uint8_t ezs_a5[8] = {0x02, 0x00, 0x24, 0x06, 0x2D, 0x18, 0x18, 0x1A};

void setup() {
    Serial.begin(115200);
    CAN0.setCANPins(CAN0_RX, CAN0_TX);
    CAN0.enable();
    CAN0.begin(500000);

    //gs418.raw = 0x504D7404DD00C000;
    //ms210.raw = 0x0000484000008000;
    //bs200.raw = 0x104401AD01AD01A7;
    //bs200.set_DVL(1000);
    //bs200.set_DVR(1000);
    //gs418.set_WHST(GearSelectorPos::D);
    //gs418.set_GIC(GEAR::G_D1);
    //gs418.set_GZC(GEAR::G_D1);
    //ms210.set_V_DSPL_PGB(true);
    //gs218.raw = 0x0000DD4923003060;
}

void copy_frame(uint8_t* src, int len) {
    for (int i = 0; i < len; i++) {
        f.data.bytes[i] = src[i];
    }
}

unsigned long spd = millis();
void loop() {
    
}